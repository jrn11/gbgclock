<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Gettysburg Clock • 1863</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<link href="https://fonts.googleapis.com/css2?family=UnifrakturMaguntia&family=Crimson+Text:wght@400;600&family=Roboto+Mono:wght@500;700&display=swap" rel="stylesheet">
<style>
  :root {
    --brass: #b89b5e;
    --brass-dark: #8b6914;
    --paper: #f4e8d1;
    --ink: #2c1e0d;
    --blood: #8b0000;
  }
  body {
    margin: 0;
    min-height: 100vh;
    font-family: 'Crimson Text', serif;
    background: url('background.png') no-repeat center center fixed;
    background-size: cover;
    color: var(--ink);
    position: relative;
  }

  /* Beautiful dark gradient overlay that points to your background.jpeg */
  body::before {
    content: "";
    position: fixed;
    inset: 0;
    background: linear-gradient(
      to bottom,
      rgba(20,15,10,0.65) 0%,
      rgba(20,15,10,0.82) 60%,
      rgba(10,8,8,0.95) 100%
    );
    pointer-events: none;
    z-index: 1;
  }

  header, .converter, .note {
    position: relative;
    z-index: 2;
  }

  header {
    text-align: center;
    padding: 50px 20px 30px;
    border-bottom: 6px double var(--brass);
  }
  h1 {
    font-family: 'UnifrakturMaguntia', cursive;
    font-size: 5.2em;
    color: var(--brass);
    margin: 0;
    text-shadow: 5px 5px 15px black;
    letter-spacing: 8px;
  }
  .subtitle {
    color: #ddd;
    font-size: 1.3em;
    letter-spacing: 6:px;
    margin-top: 10px;
  }

  .converter {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
    gap: 24px;
    max-width: 1300px;
    margin: 40px auto;
    padding: 0 20px;
  }

  .zone {
    background: var(--paper);
    padding: 26px 18px;
    border-radius: 14px;
    text-align: center;
    transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
    border: 8px solid var(--brass-dark);
    border-image: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="30" height="30"><rect width="30" height="30" fill="%238b6914"/><rect x="3" y="3" width="24" height="24" fill="none" stroke="%23b89b5e" stroke-width="3"/></svg>') 8;
    box-shadow: inset 0 0 60px rgba(139,105,20,0.3), 0 15px 40px rgba(0,0,0,0.8);
  }
  .zone::before {
    content: ""; position: absolute; inset: 8px;
    border: 2px dashed rgba(139,105,20,0.3);
    pointer-events: none;
  }
  .zone:hover { transform: translateY(-10px); }
  .zone.active {
    border-color: var(--blood);
    box-shadow: 0 30px 70px rgba(0,0,0,0.95), 0 0 60px rgba(139,0,0,0.5);
    transform: translateY(-12px);
  }
  .zone.local {
    border: 8px double var(--brass);
    animation: pulse 5s infinite;
  }
  @keyframes pulse {
    0%,100% { box-shadow: 0 15px 40px rgba(0,0,0,0.8), 0 0 40px rgba(184,155,94,0.4); }
    50%     { box-shadow: 0 15px 40px rgba(0,0,0,0.8), 0 0 70px rgba(184,155,94,0.9); }
  }

  label {
    font-weight: 600;
    font-size: 1.4em;
    display: block;
    margin-bottom: 6px;
    color: var(--ink);
  }
  small {
    opacity: 0.85;
    font-size: 0.95em;
    color: var(--brass-dark);
    font-weight: bold;
  }
  input {
    width: 100%;
    padding: 16px 10px;
    margin-top: 12px;
    font-size: 2.2em;
    font-weight: bold;
    text-align: center;
    background: rgba(255,255,255,0.94);
    border: 4px solid var(--brass-dark);
    border-radius: 10px;
    color: var(--ink);
    font-family: 'Roboto Mono', monospace;
    box-sizing: border-box;
  }
  input::placeholder { color: rgba(139,105,20,0.6); }
  input:focus {
    outline: none;
    border-color: var(--blood);
    background: white;
    box-shadow: 0 0 20px rgba(139,0,0,0.3);
  }

  .note {
    text-align: center;
    margin: 60px 20px 40px;
    font-style: italic;
    font-size: 1.15em;
    color: #ccc;
    opacity: 0.9;
  }
</style>
</head>
<body>

<header>
  <h1>Gettysburg</h1>
  <div class="subtitle">Tactical Time Command • July 1863</div>
</header>

<div class="converter" id="converter"></div>

<div class="note">
  “Four score and seven minutes ago…”<br>
  Type any time — all zones update instantly.
</div>

<script>
const zones = [
  { name: "Pacific", abbr: "PT", iana: "America/Los_Angeles" },
  { name: "Mountain", abbr: "MT", iana: "America/Denver" },
  { name: "Central", abbr: "CT", iana: "America/Chicago" },
  { name: "Eastern", abbr: "ET", iana: "America/New_York" },
  { name: "Atlantic", abbr: "AT", iana: "America/Halifax" },
  { name: "Zulu (UTC)", abbr: "Z", iana: "UTC" }
];

const userZone = Intl.DateTimeFormat().resolvedOptions().timeZone;
const converter = document.getElementById("converter");

// Build cards
zones.forEach(z => {
  const isLocal = z.iana === userZone;
  converter.innerHTML += `
    <div class="zone${isLocal ? ' local' : ''}">
      <label>${z.name}<br><small>${z.abbr}</small></label>
      <input type="text" placeholder="--:--" data-iana="${z.iana}">
    </div>`;
});

const inputs = document.querySelectorAll("input");

const displayFmt = {};
zones.forEach(z => {
  displayFmt[z.iana] = new Intl.DateTimeFormat('en-US', {
    timeZone: z.iana,
    hour: '2-digit', minute: '2-digit',
    hour12: false, hourCycle: 'h23'
  });
});

function getOffset(iana) {
  const now = new Date();
  const utc = Date.UTC(now.getUTCFullYear(), now.getUTCMonth(), now.getUTCDate(),
                       now.getUTCHours(), now.getUTCMinutes(), now.getUTCSeconds());
  const local = new Date(now.toLocaleString("en-US", {timeZone: iana}));
  return (local - new Date(utc)) / 60000;
}
const offsets = {};
zones.forEach(z => offsets[z.iana] = getOffset(z.iana));

function parseTime(str) {
  str = str.trim().toLowerCase().replace(/[^0-9amp:]/g, '');
  if (!str) return null;
  let h, m = 0;
  const num = str.replace(/[^0-9]/g, '');
  const hasPM = /p/.test(str);
  const hasAM = /a/.test(str) && !hasPM;

  if (num.length <= 2) h = +num || 0;
  else if (num.length === 3) { h = +num[0]; m = +(num[1]+num[2]); }
  else if (num.length === 4) { h = +(num[0]+num[1]); m = +(num[2]+num[3]); }
  else if (str.includes(':')) {
    const [hh, mm] = str.split(':');
    h = +(hh.replace(/\D/g,'')||0);
    m = +(mm.replace(/\D/g,'')||0);
  }
  if (hasPM && h < 12) h += 12;
  if (hasAM && h === 12) h = 0;
  return (h > 23 || m > 59) ? null : h * 60 + m;
}

function updateAll(sourceInput) {
  const srcIana = sourceInput.dataset.iana;
  const minutes = parseTime(sourceInput.value);

  document.querySelectorAll('.zone').forEach(z => z.classList.remove('active'));
  if (minutes !== null) sourceInput.closest('.zone').classList.add('active');

  if (minutes === null) {
    inputs.forEach(i => { if (i !== sourceInput) i.value = ''; });
    return;
  }

  const utcMinutes = (minutes - offsets[srcIana] + 1440) % 1440;

  inputs.forEach(inp => {
    if (inp === sourceInput) return;
    const target = (utcMinutes + offsets[inp.dataset.iana] + 1440) % 1440;
    const h = String(Math.floor(target / 60) % 24).padStart(2, '0');
    const m = String(target % 60).padStart(2, '0');
    inp.value = `${h}:${m}`;
  });
}

inputs.forEach(inp => {
  inp.addEventListener('focus', () => {
    document.querySelectorAll('.zone').forEach(z => z.classList.remove('active'));
    inp.closest('.zone').classList.add('active');
  });
  inp.addEventListener('input', () => updateAll(inp));
});

window.addEventListener('load', () => {
  const now = new Date();
  inputs.forEach(inp => {
    inp.value = displayFmt[inp.dataset.iana].format(now);
  });
});
</script>
</body>
</html>